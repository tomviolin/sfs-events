{"version":3,"sources":["@photo-sphere-viewer/core","src/index.ts","src/events.ts","src/GalleryButton.ts","src/icons/gallery.svg","src/GalleryPlugin.ts","src/GalleryComponent.ts","src/constants.ts","src/icons/blank.svg"],"sourcesContent":["module.exports = PhotoSphereViewer","import { DEFAULTS, registerButton } from '@photo-sphere-viewer/core';\nimport * as events from './events';\nimport { GalleryButton } from './GalleryButton';\n\nDEFAULTS.lang[GalleryButton.id] = 'Gallery';\nregisterButton(GalleryButton, 'caption:left');\n\nexport { GalleryPlugin } from './GalleryPlugin';\nexport * from './model';\nexport { events };\n\n/** @internal  */\nimport './style.scss';\n","import { TypedEvent } from '@photo-sphere-viewer/core';\nimport type { GalleryPlugin } from './GalleryPlugin';\n\n/**\n * @event Triggered when the gallery shown\n */\nexport class ShowGalleryEvent extends TypedEvent<GalleryPlugin> {\n    static override readonly type = 'show-gallery';\n    override type: 'show-gallery';\n\n    /** @internal */\n    constructor() {\n        super(ShowGalleryEvent.type);\n    }\n}\n\n/**\n * @event Triggered when the gallery hidden\n */\nexport class HideGalleryEvent extends TypedEvent<GalleryPlugin> {\n    static override readonly type = 'hide-gallery';\n    override type: 'hide-gallery';\n\n    /** @internal */\n    constructor() {\n        super(ShowGalleryEvent.type);\n    }\n}\n\nexport type GalleryPluginEvents = ShowGalleryEvent | HideGalleryEvent;\n","import { AbstractButton } from '@photo-sphere-viewer/core';\nimport type { Navbar } from '@photo-sphere-viewer/core';\nimport type { GalleryPlugin } from './GalleryPlugin';\nimport gallery from './icons/gallery.svg';\nimport { HideGalleryEvent, ShowGalleryEvent } from './events';\n\nexport class GalleryButton extends AbstractButton {\n    static override readonly id = 'gallery';\n\n    private readonly plugin: GalleryPlugin;\n\n    /**\n     * @param {PSV.components.Navbar} navbar\n     */\n    constructor(navbar: Navbar) {\n        super(navbar, {\n            className: 'psv-gallery-button',\n            hoverScale: true,\n            collapsable: true,\n            tabbable: true,\n            icon: gallery,\n        });\n\n        this.plugin = this.viewer.getPlugin('gallery');\n\n        if (this.plugin) {\n            this.plugin.addEventListener(ShowGalleryEvent.type, this);\n            this.plugin.addEventListener(HideGalleryEvent.type, this);\n        }\n    }\n\n    override destroy() {\n        if (this.plugin) {\n            this.plugin.removeEventListener(ShowGalleryEvent.type, this);\n            this.plugin.removeEventListener(HideGalleryEvent.type, this);\n        }\n\n        super.destroy();\n    }\n\n    /**\n     * @internal\n     */\n    handleEvent(e: Event) {\n        if (e instanceof ShowGalleryEvent) {\n            this.toggleActive(true);\n        } else if (e instanceof HideGalleryEvent) {\n            this.toggleActive(false);\n        }\n    }\n\n    override isSupported() {\n        return !!this.plugin;\n    }\n\n    onClick() {\n        this.plugin.toggle();\n    }\n}\n","<svg viewBox=\"185 115 330 330\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"currentColor\" d=\"M186.7 326.7V163.3c0-15 8.3-23.3 23.3-23.3h210c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H210c-15 0-23.3-8.3-23.3-23.3zm70 70v-23.4H420c30.2 0 46.7-16.4 46.7-46.6V210H490c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H280c-15 0-23.3-8.3-23.3-23.3zm-23.8-105H397l-40-50.4-26.7 29.7-44.3-54.5zm106.7-76c9.6 0 17.8-7.8 17.8-17.2a18 18 0 0 0-17.8-17.8c-9.4 0-17.2 8.2-17.2 17.8 0 9.4 7.8 17.2 17.2 17.2z\"/><!--Created by Wolf BÃ¶se from the Noun Project--></svg>","import type { Viewer } from '@photo-sphere-viewer/core';\nimport { AbstractConfigurablePlugin, events, PSVError, utils } from '@photo-sphere-viewer/core';\nimport { GalleryPluginEvents, HideGalleryEvent, ShowGalleryEvent } from './events';\nimport { GalleryButton } from './GalleryButton';\nimport { GalleryComponent } from './GalleryComponent';\nimport { GalleryItem, GalleryPluginConfig, UpdatableGalleryPluginConfig } from './model';\n\nconst getConfig = utils.getConfigParser<GalleryPluginConfig>({\n    items: [],\n    visibleOnLoad: false,\n    hideOnClick: true,\n    thumbnailSize: {\n        width: 200,\n        height: 100,\n    },\n});\n\n/**\n * Adds a gallery of multiple panoramas\n */\nexport class GalleryPlugin extends AbstractConfigurablePlugin<\n    GalleryPluginConfig,\n    GalleryPluginConfig,\n    UpdatableGalleryPluginConfig,\n    GalleryPluginEvents\n> {\n    static override readonly id = 'gallery';\n    static override readonly VERSION = PKG_VERSION;\n    static override readonly configParser = getConfig;\n    static override readonly readonlyOptions: Array<keyof GalleryPluginConfig> = ['visibleOnLoad', 'items'];\n\n    private readonly gallery: GalleryComponent;\n\n    private items: GalleryItem[] = [];\n    private handler?: (id: GalleryItem['id']) => void;\n    private currentId?: GalleryItem['id'];\n\n    constructor(viewer: Viewer, config: GalleryPluginConfig) {\n        super(viewer, config);\n\n        this.gallery = new GalleryComponent(this, this.viewer);\n    }\n\n    /**\n     * @internal\n     */\n    override init() {\n        super.init();\n\n        utils.checkStylesheet(this.viewer.container, 'gallery-plugin');\n\n        this.viewer.addEventListener(events.PanoramaLoadedEvent.type, this);\n        this.viewer.addEventListener(events.ShowPanelEvent.type, this);\n\n        if (this.config.visibleOnLoad) {\n            this.viewer.addEventListener(events.ReadyEvent.type, () => {\n                this.show();\n            }, { once: true });\n        }\n\n        this.setItems(this.config.items);\n        delete this.config.items;\n\n        // buttons are initialized just after plugins\n        setTimeout(() => this.__updateButton());\n    }\n\n    /**\n     * @internal\n     */\n    override destroy() {\n        this.viewer.removeEventListener(events.PanoramaLoadedEvent.type, this);\n        this.viewer.removeEventListener(events.ShowPanelEvent.type, this);\n\n        this.gallery.destroy();\n\n        super.destroy();\n    }\n\n    override setOptions(options: Partial<UpdatableGalleryPluginConfig>) {\n        super.setOptions(options);\n\n        if (options.thumbnailSize) {\n            this.gallery.setItems(this.items);\n        }\n    }\n\n    /**\n     * @internal\n     */\n    handleEvent(e: Event) {\n        if (e instanceof events.PanoramaLoadedEvent) {\n            const item = this.items.find((i) => utils.deepEqual(i.panorama, e.data.panorama));\n            this.currentId = item?.id;\n            this.gallery.setActive(this.currentId);\n        } else if (e instanceof events.ShowPanelEvent) {\n            this.gallery.isVisible() && this.hide();\n        }\n    }\n\n    /**\n     * Shows the gallery\n     */\n    show() {\n        this.dispatchEvent(new ShowGalleryEvent());\n        return this.gallery.show();\n    }\n\n    /**\n     * Hides the carousem\n     */\n    hide() {\n        this.dispatchEvent(new HideGalleryEvent());\n        return this.gallery.hide();\n    }\n\n    /**\n     * Hides or shows the gallery\n     */\n    toggle() {\n        if (this.gallery.isVisible()) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    }\n\n    /**\n     * Sets the list of items\n     * @param items\n     * @param [handler] function that will be called when an item is clicked instead of the default behavior\n     * @throws {@link PSVError} if the configuration is invalid\n     */\n    setItems(items: GalleryItem[], handler?: (id: GalleryItem['id']) => void) {\n        if (!items) {\n            items = [];\n        } else {\n            items.forEach((item, i) => {\n                if (!item.id) {\n                    throw new PSVError(`Item ${i} has no \"id\".`);\n                }\n                if (!item.panorama) {\n                    throw new PSVError(`Item ${item.id} has no \"panorama\".`);\n                }\n            });\n        }\n\n        this.handler = handler;\n        this.items = items.map((item) => ({\n            ...item,\n            id: `${item.id}`,\n        }));\n\n        this.gallery.setItems(this.items);\n\n        if (this.currentId) {\n            const item = this.items.find((i) => i.id === this.currentId);\n            this.currentId = item?.id;\n            this.gallery.setActive(this.currentId);\n        }\n\n        this.__updateButton();\n    }\n\n    /**\n     * @internal\n     */\n    __click(id: GalleryItem['id']) {\n        if (id === this.currentId) {\n            return;\n        }\n\n        if (this.handler) {\n            this.handler(id);\n        } else {\n            const item = this.items.find((i) => i.id === id);\n            this.viewer.setPanorama(item.panorama, {\n                caption: item.name,\n                ...item.options,\n            });\n        }\n\n        this.currentId = id;\n        this.gallery.setActive(id);\n\n        if (this.config.hideOnClick) {\n            this.hide();\n        }\n    }\n\n    private __updateButton() {\n        this.viewer.navbar.getButton(GalleryButton.id, false)?.toggle(this.items.length > 0);\n    }\n}\n","import type { Viewer } from '@photo-sphere-viewer/core';\nimport { AbstractComponent, utils, CONSTANTS } from '@photo-sphere-viewer/core';\nimport { ACTIVE_CLASS, GALLERY_ITEM_DATA, GALLERY_ITEM_DATA_KEY, ITEMS_TEMPLATE } from './constants';\nimport type { GalleryPlugin } from './GalleryPlugin';\nimport blankIcon from './icons/blank.svg';\nimport { GalleryItem } from './model';\n\nexport class GalleryComponent extends AbstractComponent {\n    protected override readonly state = {\n        visible: true,\n        mousedown: false,\n        initMouse: null as number,\n        mouse: null as number,\n        itemMargin: null as number,\n        breakpoint: null as number,\n    };\n\n    private readonly observer: IntersectionObserver;\n    private readonly items: HTMLElement;\n\n    constructor(\n        private readonly plugin: GalleryPlugin,\n        viewer: Viewer\n    ) {\n        super(viewer, {\n            className: `psv-gallery ${CONSTANTS.CAPTURE_EVENTS_CLASS}`,\n        });\n\n        this.container.innerHTML = blankIcon;\n        this.container.querySelector('svg').style.display = 'none';\n\n        const closeBtn = document.createElement('div');\n        closeBtn.className = 'psv-panel-close-button';\n        closeBtn.innerHTML = CONSTANTS.ICONS.close;\n        this.container.appendChild(closeBtn);\n\n        this.items = document.createElement('div');\n        this.items.className = 'psv-gallery-container';\n        this.container.appendChild(this.items);\n\n        this.state.itemMargin = parseInt(utils.getStyleProperty(this.items, 'padding-left'), 10);\n        this.state.breakpoint = parseInt(utils.getStyleProperty(this.container, '--psv-gallery-breakpoint'), 10);\n\n        this.observer = new IntersectionObserver(\n            (entries) => {\n                entries.forEach((entry) => {\n                    if (entry.intersectionRatio > 0) {\n                        const element = entry.target as HTMLElement;\n                        element.style.backgroundImage = `url(\"${element.dataset.src}\")`;\n                        delete element.dataset.src;\n                        this.observer.unobserve(entry.target);\n                    }\n                });\n            },\n            {\n                root: this.viewer.container,\n            }\n        );\n\n        this.items.addEventListener('wheel', this);\n        this.items.addEventListener('mousedown', this);\n        this.items.addEventListener('mousemove', this);\n        this.items.addEventListener('click', this);\n        window.addEventListener('mouseup', this);\n\n        closeBtn.addEventListener('click', () => this.plugin.hide());\n\n        this.hide();\n    }\n\n    override destroy() {\n        window.removeEventListener('mouseup', this);\n\n        this.observer.disconnect();\n\n        super.destroy();\n    }\n\n    /**\n     * @internal\n     */\n    handleEvent(e: Event) {\n        const isAboveBreakpoint = window.innerWidth > this.state.breakpoint;\n\n        switch (e.type) {\n            case 'wheel': {\n                if (isAboveBreakpoint) {\n                    const evt = e as WheelEvent;\n                    const scrollAmount = this.plugin.config.thumbnailSize.width + this.state.itemMargin ?? 0;\n                    this.items.scrollLeft += (evt.deltaY / Math.abs(evt.deltaY)) * scrollAmount;\n                    e.preventDefault();\n                }\n                break;\n            }\n\n            case 'mousedown':\n                this.state.mousedown = true;\n                if (isAboveBreakpoint) {\n                    this.state.initMouse = (e as MouseEvent).clientX;\n                } else {\n                    this.state.initMouse = (e as MouseEvent).clientY;\n                }\n                this.state.mouse = this.state.initMouse;\n                break;\n\n            case 'mousemove':\n                if (this.state.mousedown) {\n                    if (isAboveBreakpoint) {\n                        const delta = this.state.mouse - (e as MouseEvent).clientX;\n                        this.items.scrollLeft += delta;\n                        this.state.mouse = (e as MouseEvent).clientX;\n                    } else {\n                        const delta = this.state.mouse - (e as MouseEvent).clientY;\n                        this.items.scrollTop += delta;\n                        this.state.mouse = (e as MouseEvent).clientY;\n                    }\n                }\n                break;\n\n            case 'mouseup':\n                this.state.mousedown = false;\n                this.state.mouse = null;\n                e.preventDefault();\n                break;\n\n            case 'click': {\n                // prevent click on drag\n                const currentMouse = isAboveBreakpoint ? (e as MouseEvent).clientX : (e as MouseEvent).clientY;\n                if (Math.abs(this.state.initMouse - currentMouse) < 10) {\n                    const item = utils.getClosest(e.target as HTMLElement, `[data-${GALLERY_ITEM_DATA_KEY}]`);\n                    if (item) {\n                        this.plugin.__click(item.dataset[GALLERY_ITEM_DATA]);\n                    }\n                }\n                break;\n            }\n        }\n    }\n\n    override show() {\n        this.container.classList.add('psv-gallery--open');\n        this.state.visible = true;\n    }\n\n    override hide() {\n        this.container.classList.remove('psv-gallery--open');\n        this.state.visible = false;\n    }\n\n    setItems(items: GalleryItem[]) {\n        this.items.innerHTML = ITEMS_TEMPLATE(items, this.plugin.config.thumbnailSize);\n\n        if (this.observer) {\n            this.observer.disconnect();\n\n            this.items.querySelectorAll('[data-src]').forEach((child) => {\n                this.observer.observe(child);\n            });\n        }\n    }\n\n    setActive(id: GalleryItem['id']) {\n        const currentActive = this.items.querySelector('.' + ACTIVE_CLASS);\n        currentActive?.classList.remove(ACTIVE_CLASS);\n\n        if (id) {\n            const nextActive = this.items.querySelector(`[data-${GALLERY_ITEM_DATA_KEY}=\"${id}\"]`) as HTMLElement;\n            if (nextActive) {\n                nextActive.classList.add(ACTIVE_CLASS);\n                this.items.scrollLeft = nextActive.offsetLeft + nextActive.clientWidth / 2 - this.items.clientWidth / 2;\n            }\n        }\n    }\n}\n","import type { Size } from '@photo-sphere-viewer/core';\nimport { utils } from '@photo-sphere-viewer/core';\nimport { GalleryItem } from './model';\n\n/**\n * Property name added to gallery items\n * @internal\n */\nexport const GALLERY_ITEM_DATA = 'psvGalleryItem';\n\n/**\n * Property name added to gallery items (dash-case)\n * @internal\n */\nexport const GALLERY_ITEM_DATA_KEY = utils.dasherize(GALLERY_ITEM_DATA);\n\n/**\n * Class added to active gallery items\n * @internal\n */\nexport const ACTIVE_CLASS = 'psv-gallery-item--active';\n\n/**\n * Gallery template\n * @internal\n */\nexport const ITEMS_TEMPLATE = (items: GalleryItem[], size: Size) => `\n${items\n    .map(\n        (item) => `\n<div class=\"psv-gallery-item\" data-${GALLERY_ITEM_DATA_KEY}=\"${item.id}\" style=\"width:${size.width}px; aspect-ratio:${size.width / size.height};\">\n  ${item.name ? `<div class=\"psv-gallery-item-title\"><span>${item.name}</span></div>` : ''}\n  <svg class=\"psv-gallery-item-thumb\" viewBox=\"0 0 200 200\" preserveAspectRatio=\"xMidYMid slice\"><use href=\"#psvGalleryBlankIcon\"></use></svg>\n  ${item.thumbnail ? `<div class=\"psv-gallery-item-thumb\" data-src=\"${item.thumbnail}\"></div>` : ''}\n</div>\n`\n    )\n    .join('')}\n`;\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\">\n  <defs>\n    <symbol id=\"psvGalleryBlankIcon\" viewBox=\"0 0 200 200\">\n      <rect x=\"0\" y=\"0\" width=\"200\" height=\"200\" fill=\"#666\"/>\n      <g transform=\"scale(0.25) translate(25 20) \" fill=\"#eee\">\n        <path d=\"M376 220.61c-85.84 0-155.39 69.56-155.39 155.39 0 85.84 69.56 155.39 155.39 155.39 85.84 0 155.39-69.56 155.39-155.39 0-85.84-69.56-155.39-155.39-155.39zm0 300.92c-80.41 0-145.53-65.12-145.53-145.53S295.59 230.47 376 230.47 521.53 295.59 521.53 376 456.41 521.53 376 521.53z\"/>\n        <path d=\"M467.27 300.03H284.74a18.21 18.21 0 0 0-18.25 18.25v115.43a18.21 18.21 0 0 0 18.25 18.26h182.53a18.21 18.21 0 0 0 18.25-18.26V318.28a18.2 18.2 0 0 0-18.25-18.25zm-190.91 18.25a8.64 8.64 0 0 1 8.39-8.38h182.53a8.64 8.64 0 0 1 8.38 8.38V413l-44.89-35.52c-.49-.5-.99-.5-1.48-.99h-2.46c-.5 0-1 0-1.48.5l-37.5 21.2-43.9-58.7-.5-.5s0-.48-.49-.48c0 0-.49 0-.49-.5-.49 0-.49-.49-.99-.49-.49 0-.49 0-.98-.49H337.53c-.5 0-.5.5-.99.5h-.49l-.5.48s-.48 0-.48.5l-58.7 65.12zM467.27 442.1H284.74a8.64 8.64 0 0 1-8.39-8.38v-15.3l63.15-68.07 42.92 57.22 1.48 1.48h.49c.5.5 1.48.5 1.97.5H388.83l38.47-21.72 46.37 36.5c.5.5 1.49 1 1.98 1v8.88c0 3.95-3.45 7.9-8.38 7.9z\"/>\n        <path d=\"M429.77 333.58a13.81 13.81 0 1 1-27.63 0 13.81 13.81 0 0 1 27.63 0\"/>\n      </g>\n    </symbol>\n  </defs>\n</svg>"],"mappings":"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","names":["import_core","import_core","import_core","import_core","import_core"]}